<!DOCTYPE html>
<html style="display: none;" lang="zh">
    <head>
    <meta charset="utf-8">
    <!--
        © Material Theme
        https://github.com/viosey/hexo-theme-material
        Version: 1.5.2 -->
    <script>
        window.materialVersion = "1.5.2"
        // Delete localstorage with these tags
        window.oldVersion = [
            'codestartv1',
            '1.3.4',
            '1.4.0',
            '1.4.0b1',
            '1.5.0'
        ]
    </script>

    <!-- dns prefetch -->
    <meta http-equiv="x-dns-prefetch-control" content="on">














    <!-- Meta & Info -->
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <meta name="renderer" content="webkit">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

    <!-- Title -->
    
    <title>
        
            activeMq的安装和基础 | 
        
        Hlmk&#39;s Blog
    </title>

    <!-- Favicons -->
    <link rel="icon shortcut" type="image/ico" href="/img/favicon.ico">
    <link rel="icon" href="/img/favicon.ico">

    <meta name="format-detection" content="telephone=no"/>
    <meta name="description" itemprop="description" content="">
    <meta name="keywords" content="">
    <meta name="theme-color" content="#0097A7">

    <!-- Disable Fucking Bloody Baidu Tranformation -->
    <meta http-equiv="Cache-Control" content="no-transform" />
    <meta http-equiv="Cache-Control" content="no-siteapp" />

    <!--[if lte IE 9]>
        <link rel="stylesheet" href="/css/ie-blocker.css">

        
            <script src="/js/ie-blocker.zhCN.js"></script>
        
    <![endif]-->

    <!-- Import lsloader -->
    <script>(function(){window.lsloader={jsRunSequence:[],jsnamemap:{},cssnamemap:{}};lsloader.removeLS=function(a){try{localStorage.removeItem(a)}catch(b){}};lsloader.setLS=function(a,c){try{localStorage.setItem(a,c)}catch(b){}};lsloader.getLS=function(a){var c="";try{c=localStorage.getItem(a)}catch(b){c=""}return c};versionString="/*"+(window.materialVersion||"unknownVersion")+"*/";lsloader.clean=function(){try{var b=[];for(var a=0;a<localStorage.length;a++){b.push(localStorage.key(a))}b.forEach(function(e){var f=lsloader.getLS(e);if(window.oldVersion){var d=window.oldVersion.reduce(function(g,h){return g||f.indexOf("/*"+h+"*/")!==-1},false);if(d){lsloader.removeLS(e)}}})}catch(c){}};lsloader.clean();lsloader.load=function(f,a,b,d){if(typeof b==="boolean"){d=b;b=undefined}d=d||false;b=b||function(){};var e;e=this.getLS(f);if(e&&e.indexOf(versionString)===-1){this.removeLS(f);this.requestResource(f,a,b,d);return}if(e){var c=e.split(versionString)[0];if(c!=a){console.log("reload:"+a);this.removeLS(f);this.requestResource(f,a,b,d);return}e=e.split(versionString)[1];if(d){this.jsRunSequence.push({name:f,code:e});this.runjs(a,f,e)}else{document.getElementById(f).appendChild(document.createTextNode(e));b()}}else{this.requestResource(f,a,b,d)}};lsloader.requestResource=function(b,e,a,c){var d=this;if(c){this.iojs(e,b,function(h,f,g){d.setLS(f,h+versionString+g);d.runjs(h,f,g)})}else{this.iocss(e,b,function(f){document.getElementById(b).appendChild(document.createTextNode(f));d.setLS(b,e+versionString+f)},a)}};lsloader.iojs=function(d,b,g){var a=this;a.jsRunSequence.push({name:b,code:""});try{var f=new XMLHttpRequest();f.open("get",d,true);f.onreadystatechange=function(){if(f.readyState==4){if((f.status>=200&&f.status<300)||f.status==304){if(f.response!=""){g(d,b,f.response);return}}a.jsfallback(d,b)}};f.send(null)}catch(c){a.jsfallback(d,b)}};lsloader.iocss=function(f,c,h,a){var b=this;try{var g=new XMLHttpRequest();g.open("get",f,true);g.onreadystatechange=function(){if(g.readyState==4){if((g.status>=200&&g.status<300)||g.status==304){if(g.response!=""){h(g.response);a();return}}b.cssfallback(f,c,a)}};g.send(null)}catch(d){b.cssfallback(f,c,a)}};lsloader.iofonts=function(f,c,h,a){var b=this;try{var g=new XMLHttpRequest();g.open("get",f,true);g.onreadystatechange=function(){if(g.readyState==4){if((g.status>=200&&g.status<300)||g.status==304){if(g.response!=""){h(g.response);a();return}}b.cssfallback(f,c,a)}};g.send(null)}catch(d){b.cssfallback(f,c,a)}};lsloader.runjs=function(f,c,e){if(!!c&&!!e){for(var b in this.jsRunSequence){if(this.jsRunSequence[b].name==c){this.jsRunSequence[b].code=e}}}if(!!this.jsRunSequence[0]&&!!this.jsRunSequence[0].code&&this.jsRunSequence[0].status!="failed"){var a=document.createElement("script");a.appendChild(document.createTextNode(this.jsRunSequence[0].code));a.type="text/javascript";document.getElementsByTagName("head")[0].appendChild(a);this.jsRunSequence.shift();if(this.jsRunSequence.length>0){this.runjs()}}else{if(!!this.jsRunSequence[0]&&this.jsRunSequence[0].status=="failed"){var d=this;var a=document.createElement("script");a.src=this.jsRunSequence[0].path;a.type="text/javascript";this.jsRunSequence[0].status="loading";a.onload=function(){d.jsRunSequence.shift();if(d.jsRunSequence.length>0){d.runjs()}};document.body.appendChild(a)}}};lsloader.tagLoad=function(b,a){this.jsRunSequence.push({name:a,code:"",path:b,status:"failed"});this.runjs()};lsloader.jsfallback=function(c,b){if(!!this.jsnamemap[b]){return}else{this.jsnamemap[b]=b}for(var a in this.jsRunSequence){if(this.jsRunSequence[a].name==b){this.jsRunSequence[a].code="";this.jsRunSequence[a].status="failed";this.jsRunSequence[a].path=c}}this.runjs()};lsloader.cssfallback=function(e,c,b){if(!!this.cssnamemap[c]){return}else{this.cssnamemap[c]=1}var d=document.createElement("link");d.type="text/css";d.href=e;d.rel="stylesheet";d.onload=d.onerror=b;var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(d,a)};lsloader.runInlineScript=function(c,b){var a=document.getElementById(b).innerText;this.jsRunSequence.push({name:c,code:a});this.runjs()}})();</script>

    <!-- Import queue -->
    <script>function Queue(){this.dataStore=[];this.offer=b;this.poll=d;this.execNext=a;this.debug=false;this.startDebug=c;function b(e){if(this.debug){console.log("Offered a Queued Function.")}if(typeof e==="function"){this.dataStore.push(e)}else{console.log("You must offer a function.")}}function d(){if(this.debug){console.log("Polled a Queued Function.")}return this.dataStore.shift()}function a(){var e=this.poll();if(e!==undefined){if(this.debug){console.log("Run a Queued Function.")}e()}}function c(){this.debug=true}}var queue=new Queue();</script>

    <!-- Import CSS -->
    
        <style id="material_css"></style><script>if(typeof window.lsLoadCSSMaxNums === "undefined")window.lsLoadCSSMaxNums = 0;window.lsLoadCSSMaxNums++;lsloader.load("material_css","/css/material.min.css?Z7a72R1E4SxzBKR/WGctOA==",function(){if(typeof window.lsLoadCSSNums === "undefined")window.lsLoadCSSNums = 0;window.lsLoadCSSNums++;if(window.lsLoadCSSNums == window.lsLoadCSSMaxNums)document.documentElement.style.display="";}, false)</script>
        <style id="style_css"></style><script>if(typeof window.lsLoadCSSMaxNums === "undefined")window.lsLoadCSSMaxNums = 0;window.lsLoadCSSMaxNums++;lsloader.load("style_css","/css/style.min.css?MKetZV3cUTfDxvMffaOezg==",function(){if(typeof window.lsLoadCSSNums === "undefined")window.lsLoadCSSNums = 0;window.lsLoadCSSNums++;if(window.lsLoadCSSNums == window.lsLoadCSSMaxNums)document.documentElement.style.display="";}, false)</script>

        
            
                <style id="prettify_css"></style><script>if(typeof window.lsLoadCSSMaxNums === "undefined")window.lsLoadCSSMaxNums = 0;window.lsLoadCSSMaxNums++;lsloader.load("prettify_css","/css/prettify.min.css?zp8STOU9v89XWFEnN+6YmQ==",function(){if(typeof window.lsLoadCSSNums === "undefined")window.lsLoadCSSNums = 0;window.lsLoadCSSNums++;if(window.lsLoadCSSNums == window.lsLoadCSSMaxNums)document.documentElement.style.display="";}, false)</script>
                <style id="prettify_theme"></style><script>if(typeof window.lsLoadCSSMaxNums === "undefined")window.lsLoadCSSMaxNums = 0;window.lsLoadCSSMaxNums++;lsloader.load("prettify_theme","/css/prettify/github-v2.min.css?AfzKxt++K+/lhZBlSjnxwg==",function(){if(typeof window.lsLoadCSSNums === "undefined")window.lsLoadCSSNums = 0;window.lsLoadCSSNums++;if(window.lsLoadCSSNums == window.lsLoadCSSMaxNums)document.documentElement.style.display="";}, false)</script>
            
        

    

    

    <!-- Config CSS -->

<!-- Other Styles -->
<style>
  body, html {
    font-family: Roboto, "Helvetica Neue", Helvetica, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "微软雅黑", Arial, sans-serif;
    overflow-x: hidden !important;
  }
  
  code {
    font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
  }

  a {
    color: #00838F;
  }

  .mdl-card__media,
  #search-label,
  #search-form-label:after,
  #scheme-Paradox .hot_tags-count,
  #scheme-Paradox .sidebar_archives-count,
  #scheme-Paradox .sidebar-colored .sidebar-header,
  #scheme-Paradox .sidebar-colored .sidebar-badge{
    background-color: #0097A7 !important;
  }

  /* Sidebar User Drop Down Menu Text Color */
  #scheme-Paradox .sidebar-colored .sidebar-nav>.dropdown>.dropdown-menu>li>a:hover,
  #scheme-Paradox .sidebar-colored .sidebar-nav>.dropdown>.dropdown-menu>li>a:focus {
    color: #0097A7 !important;
  }

  #post_entry-right-info,
  .sidebar-colored .sidebar-nav li:hover > a,
  .sidebar-colored .sidebar-nav li:hover > a i,
  .sidebar-colored .sidebar-nav li > a:hover,
  .sidebar-colored .sidebar-nav li > a:hover i,
  .sidebar-colored .sidebar-nav li > a:focus i,
  .sidebar-colored .sidebar-nav > .open > a,
  .sidebar-colored .sidebar-nav > .open > a:hover,
  .sidebar-colored .sidebar-nav > .open > a:focus,
  #ds-reset #ds-ctx .ds-ctx-entry .ds-ctx-head a {
    color: #0097A7 !important;
  }

  .toTop {
    background: #757575 !important;
  }

  .material-layout .material-post>.material-nav,
  .material-layout .material-index>.material-nav,
  .material-nav a {
    color: #757575;
  }

  #scheme-Paradox .MD-burger-layer {
    background-color: #757575;
  }

  #scheme-Paradox #post-toc-trigger-btn {
    color: #757575;
  }

  .post-toc a:hover {
    color: #00838F;
    text-decoration: underline;
  }

</style>


<!-- Theme Background Related-->

    <style>
      body{
        background-color: #F5F5F5;
      }

      /* blog_info bottom background */
      #scheme-Paradox .material-layout .something-else .mdl-card__supporting-text{
        background-color: #fff;
      }
    </style>




<!-- Fade Effect -->

    <style>
      .fade {
        transition: all 800ms linear;
        -webkit-transform: translate3d(0,0,0);
        -moz-transform: translate3d(0,0,0);
        -ms-transform: translate3d(0,0,0);
        -o-transform: translate3d(0,0,0);
        transform: translate3d(0,0,0);
        opacity: 1;
      }

      .fade.out{
        opacity: 0;
      }
    </style>


<!-- Import Font -->
<!-- Import Roboto -->

    <link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500" rel="stylesheet">


<!-- Import Material Icons -->


    <style id="material_icons"></style><script>if(typeof window.lsLoadCSSMaxNums === "undefined")window.lsLoadCSSMaxNums = 0;window.lsLoadCSSMaxNums++;lsloader.load("material_icons","/css/material-icons.css?pqhB/Rd/ab0H2+kZp0RDmw==",function(){if(typeof window.lsLoadCSSNums === "undefined")window.lsLoadCSSNums = 0;window.lsLoadCSSNums++;if(window.lsLoadCSSNums == window.lsLoadCSSMaxNums)document.documentElement.style.display="";}, false)</script>




    <!-- Import jQuery -->
    
        <script>lsloader.load("jq_js","/js/jquery.min.js?qcusAULNeBksqffqUM2+Ig==", true)</script>
    

    <!-- WebAPP Icons -->
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="application-name" content="Hlmk&#39;s Blog">
    <meta name="msapplication-starturl" content="https://hlmk.github.com/2018/05/22/activeMq的安装和基础/">
    <meta name="msapplication-navbutton-color" content="#0097A7">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-title" content="Hlmk&#39;s Blog">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon" href="/img/favicon.ico">

    <!-- Site Verification -->
    
    

    <!-- RSS -->
    

    <!-- The Open Graph protocol -->
    <meta property="og:url" content="https://hlmk.github.com/2018/05/22/activeMq的安装和基础/">
    <meta property="og:type" content="blog">
    <meta property="og:title" content="activeMq的安装和基础 | Hlmk&#39;s Blog">
    <meta property="og:image" content="/img/favicon.ico">
    <meta property="og:description" content="">
    

    
        <meta property="article:published_time" content="Tue May 22 2018 17:27:06 GMT+0800">
        <meta property="article:modified_time" content="Tue May 22 2018 23:18:44 GMT+0800">
    

    <!-- The Twitter Card protocol -->
    <meta name="twitter:card" content="summary_large_image">

    <!-- Add canonical link for SEO -->
    
        <link rel="canonical" href="https://hlmk.github.com/2018/05/22/activeMq的安装和基础/index.html" />
    

    <!-- Structured-data for SEO -->
    
        


<script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "BlogPosting",
    "mainEntityOfPage": "https://hlmk.github.com/2018/05/22/activeMq的安装和基础/index.html",
    "headline": "activeMq的安装和基础",
    "datePublished": "Tue May 22 2018 17:27:06 GMT+0800",
    "dateModified": "Tue May 22 2018 23:18:44 GMT+0800",
    "author": {
        "@type": "Person",
        "name": "hlmk",
        "image": {
            "@type": "ImageObject",
            "url": "/img/avatar.gif"
        },
        "description": "路漫漫其修远兮"
    },
    "publisher": {
        "@type": "Organization",
        "name": "Hlmk&#39;s Blog",
        "logo": {
            "@type":"ImageObject",
            "url": "/img/favicon.ico"
        }
    },
    "keywords": "",
    "description": "",
}
</script>


    

    <!-- Analytics -->
    
    
        <script>
    var _hmt = _hmt || [];
    (function() {var hm = document.createElement('script');
    hm.src = 'https://hm.baidu.com/hm.js?0c517b1c29118954f5fc8fca5be978ea';
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(hm, s);
    })();
</script>
    
    

    <!-- Custom Head -->
    

<link rel="stylesheet" href="/css/prism.css" type="text/css">
<link rel="stylesheet" href="/css/prism-line-numbers.css" type="text/css"></head>


    
        <body id="scheme-Paradox" class="lazy">
            <div class="material-layout  mdl-js-layout has-drawer is-upgraded">
                

                <!-- Main Container -->
                <main class="material-layout__content" id="main">

                    <!-- Top Anchor -->
                    <div id="top"></div>

                    
                        <!-- Hamburger Button -->
                        <button class="MD-burger-icon sidebar-toggle">
                            <span class="MD-burger-layer"></span>
                        </button>
                    

                    <!-- Post TOC -->

    
    <!-- Back Button -->
    <!--
    <div class="material-back" id="backhome-div" tabindex="0">
        <a class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon"
           href="#" onclick="window.history.back();return false;"
           target="_self"
           role="button"
           data-upgraded=",MaterialButton,MaterialRipple">
            <i class="material-icons" role="presentation">arrow_back</i>
            <span class="mdl-button__ripple-container">
                <span class="mdl-ripple"></span>
            </span>
        </a>
    </div>
    -->


    <!-- Left aligned menu below button -->
    
    
    <button id="post-toc-trigger-btn"
        class="mdl-button mdl-js-button mdl-button--icon">
        <i class="material-icons">format_list_numbered</i>
    </button>

    <ul class="post-toc-wrap mdl-menu mdl-menu--bottom-left mdl-js-menu mdl-js-ripple-effect" for="post-toc-trigger-btn" style="max-height:80vh; overflow-y:scroll;">
        <ol class="post-toc"><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#activeMq的基本介绍"><span class="post-toc-number">1.</span> <span class="post-toc-text">activeMq的基本介绍</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#ActiveMQ是什么"><span class="post-toc-number">1.1.</span> <span class="post-toc-text">ActiveMQ是什么</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#ActiveMQ能干什么"><span class="post-toc-number">1.2.</span> <span class="post-toc-text">ActiveMQ能干什么</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#ActiveMQ特点"><span class="post-toc-number">1.3.</span> <span class="post-toc-text">ActiveMQ特点</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#消息中间件"><span class="post-toc-number">1.4.</span> <span class="post-toc-text">消息中间件</span></a></li></ol></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#ActiveMq的安装和基本使用"><span class="post-toc-number">2.</span> <span class="post-toc-text">ActiveMq的安装和基本使用</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#下载并安装ActiveMQ服务器端"><span class="post-toc-number">2.1.</span> <span class="post-toc-text">下载并安装ActiveMQ服务器端</span></a></li></ol></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#基本的Queue消息发送"><span class="post-toc-number">3.</span> <span class="post-toc-text">基本的Queue消息发送</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#配置Maven所需的依赖，示例如下："><span class="post-toc-number">3.1.</span> <span class="post-toc-text">配置Maven所需的依赖，示例如下：</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#基本的生产者和消费者代码示例"><span class="post-toc-number">3.2.</span> <span class="post-toc-text">基本的生产者和消费者代码示例</span></a></li></ol></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#JMS基本概念和模型"><span class="post-toc-number">4.</span> <span class="post-toc-text">JMS基本概念和模型</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#JMS基本概念"><span class="post-toc-number">4.1.</span> <span class="post-toc-text">JMS基本概念</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#JMS的消息结构"><span class="post-toc-number">4.2.</span> <span class="post-toc-text">JMS的消息结构</span></a></li></ol></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#JMS的可靠性机制"><span class="post-toc-number">5.</span> <span class="post-toc-text">JMS的可靠性机制</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#消息接收确认"><span class="post-toc-number">5.1.</span> <span class="post-toc-text">消息接收确认</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#消息持久性"><span class="post-toc-number">5.2.</span> <span class="post-toc-text">消息持久性</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#消息优先级"><span class="post-toc-number">5.3.</span> <span class="post-toc-text">消息优先级</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#消息过期"><span class="post-toc-number">5.4.</span> <span class="post-toc-text">消息过期</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#消息的临时目的地"><span class="post-toc-number">5.5.</span> <span class="post-toc-text">消息的临时目的地</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#持久订阅"><span class="post-toc-number">5.6.</span> <span class="post-toc-text">持久订阅</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#本地事务"><span class="post-toc-number">5.7.</span> <span class="post-toc-text">本地事务</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#JMS的PTP模型"><span class="post-toc-number">5.8.</span> <span class="post-toc-text">JMS的PTP模型</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#JMS的Pub-Sub模型"><span class="post-toc-number">5.9.</span> <span class="post-toc-text">JMS的Pub/Sub模型</span></a></li></ol></li></ol>
    </ul>
    




<!-- Layouts -->

    <!-- Post Module -->
    <div class="material-post_container">

        <div class="material-post mdl-grid">
            <div class="mdl-card mdl-shadow--4dp mdl-cell mdl-cell--12-col">

                <!-- Post Header(Thumbnail & Title) -->
                
    <!-- Paradox Post Header -->
    
        
            <!-- Random Thumbnail -->
            <div class="post_thumbnail-random mdl-card__media mdl-color-text--grey-50">
            <script type="text/ls-javascript" id="post-thumbnail-script">
    var randomNum = Math.floor(Math.random() * 19 + 1);

    $('.post_thumbnail-random').attr('data-original', '/img/random/material-' + randomNum + '.png');
    $('.post_thumbnail-random').addClass('lazy');
</script>

        
    
            <p class="article-headline-p">
                activeMq的安装和基础
            </p>
        </div>





                
                    <!-- Paradox Post Info -->
                    <div class="mdl-color-text--grey-700 mdl-card__supporting-text meta">

    <!-- Author Avatar -->
    <div id="author-avatar">
        <img src="/img/avatar.gif" width="44px" height="44px" alt="Author Avatar"/>
    </div>
    <!-- Author Name & Date -->
    <div>
        <strong>hlmk</strong>
        <span>5月 22, 2018</span>
    </div>

    <div class="section-spacer"></div>

    <!-- Favorite -->
    <!--
        <button id="article-functions-like-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon btn-like">
            <i class="material-icons" role="presentation">favorite</i>
            <span class="visuallyhidden">favorites</span>
        </button>
    -->

    <!-- Qrcode -->
    
        <button id="article-functions-qrcode-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon">
    <i class="material-icons" role="presentation">devices other</i>
    <span class="visuallyhidden">devices other</span>
</button>
<ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect" for="article-functions-qrcode-button">
    <li class="mdl-menu__item">在其它设备中阅读本文章</li>
    
        <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAPYAAAD2CAAAAADAeSUUAAACz0lEQVR42u3a0W4bMQwEwPz/T7evBYImu+S1saW5J8M2ZA0DhNBSH7+ufD6wsbGxsbGxsbGxX5L9ET9/fj9Z4fOn7fc//9Zsz9jY2Ng3sL/51x9va4ZMVtjsGRsbG/sedrK5BDxrZsn6sz1jY2NjY3/dMPIyJcX6GomNjY2N/VQD+5r91Pr5a2xsbGzsOqApQ/w8rmpL+Z+yNGxsbOyXZ88GvT/7+sfm29jY2Ngvxl5dZwyi/GfHt6vdYmNjYx/Kbke27SA2P0hsDkXRKAIbGxv7Gna73aSZtfFTe2UzKis2Njb20ezkh9vSbK7pJKvln2JjY2Pfxm6PCu2FnuSdtpRRK8XGxsY+mp3HSW3by6OiDf7hO6fY2NjYb8guQvb1gWFT4jaQwsbGxr6BnRwz2uA+j5PasfEm/MLGxsY+lb2JeGbHj1lT3A8zsLGxsU9lt0FPu4n2eLMZNhehEjY2NvZB7DaUz+Oh5KiTP+0FoLpvY2NjY78tuw1x8qs5sxBqMx6u+zY2Njb2cezZwLVtKtEWR+NkbGxs7JvZOaxtOS2yvdZTNDxsbGzso9n7BjY7csyON/lIABsbG/sG9iwGytvbbJycFzofP2BjY2Ofzd4cQjbBUNR4Fi0TGxsb+2Z2Hhjl8f3+klBSrL/+CbGxsbGPZu9j/ZyUtLF2GPDACQwbGxv7zdn5tZuENBstzNpScazCxsbGPpqdt6inmlx7VSjHF6ESNjY29gXsWfNoMbOQq74Gio2NjX0ou31mZWpHBXmxVndOsbGxsY9gty0hGQa37SdvbG3psbGxse9hb5pWvvW2KG0D+6YpYmNjY1/AbpvW7OjSNqqnru9gY2NjYydbb8uRDwP2IRQ2NjY2djuszd+ZRVf1nrGxsbEvYOeMNmDKS5kMj2frYGNjY5/Nbge97TD4X4wf6rJiY2NjH8q+58HGxsbGxsbGxsZ+mec3q6+a3YHPTtgAAAAASUVORK5CYII=">
    
</ul>

    

    <!-- Tags (bookmark) -->
    

    <!-- Share -->
    
        <button id="article-fuctions-share-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon">
    <i class="material-icons" role="presentation">share</i>
    <span class="visuallyhidden">share</span>
</button>
<ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect" for="article-fuctions-share-button">
    

    

    <!-- Share Weibo -->
    
        <a class="post_share-link" href="http://service.weibo.com/share/share.php?appkey=&title=activeMq的安装和基础&url=https://hlmk.github.com/2018/05/22/activeMq的安装和基础/index.html&pic=https://hlmk.github.com/img/favicon.ico&searchPic=false&style=simple" target="_blank">
            <li class="mdl-menu__item">
                分享到微博
            </li>
        </a>
    

    <!-- Share Twitter -->
    
        <a class="post_share-link" href="https://twitter.com/intent/tweet?text=activeMq的安装和基础&url=https://hlmk.github.com/2018/05/22/activeMq的安装和基础/index.html&via=hlmk" target="_blank">
            <li class="mdl-menu__item">
                分享到 Twitter
            </li>
        </a>
    

    <!-- Share Facebook -->
    
        <a class="post_share-link" href="https://www.facebook.com/sharer/sharer.php?u=https://hlmk.github.com/2018/05/22/activeMq的安装和基础/index.html" target="_blank">
            <li class="mdl-menu__item">
                分享到 Facebook
            </li>
        </a>
    

    <!-- Share Google+ -->
    
        <a class="post_share-link" href="https://plus.google.com/share?url=https://hlmk.github.com/2018/05/22/activeMq的安装和基础/index.html" target="_blank">
            <li class="mdl-menu__item">
                分享到 Google+
            </li>
        </a>
    

    <!-- Share LinkedIn -->
    

    <!-- Share QQ -->
    

    <!-- Share Telegram -->
    
</ul>

    
</div>

                

                <!-- Post Content -->
                <div id="post-content" class="mdl-color-text--grey-700 mdl-card__supporting-text fade out">
    
        <hr>
<p>申明：请尽量与我本博文所有的软件版本保持一致，避免不必要的错误。</p>
<p>所用软件版本列表：<br>    activeMq：apache-activemq-5.15.3-bin.tar.gz<br>    JDK8</p>
<p> 所用软件官方网站列表：<br>     activeMq官网：<a href="http://activemq.apache.org/" target="_blank" rel="noopener">http://activemq.apache.org/</a><br>    activeMq5.15.3：<a href="http://activemq.apache.org/activemq-5153-release.html" target="_blank" rel="noopener">http://activemq.apache.org/activemq-5153-release.html</a></p>
<h1 id="activeMq的基本介绍"><a href="#activeMq的基本介绍" class="headerlink" title="activeMq的基本介绍"></a>activeMq的基本介绍</h1><h2 id="ActiveMQ是什么"><a href="#ActiveMQ是什么" class="headerlink" title="ActiveMQ是什么"></a>ActiveMQ是什么</h2><p>ActiveMQ是Apache推出的，一款开源的，完全支持JMS1.1和J2EE1.4规范的JMS Provider实现的消息中间件（Message Oriented Middleware， MOM）</p>
<h2 id="ActiveMQ能干什么"><a href="#ActiveMQ能干什么" class="headerlink" title="ActiveMQ能干什么"></a>ActiveMQ能干什么</h2><p>最主要的功能就是：实现JMS Provider 用来帮助实现高可用、高性能、可伸缩、易用和安全的企业级面向消息服务的系统</p>
<h2 id="ActiveMQ特点"><a href="#ActiveMQ特点" class="headerlink" title="ActiveMQ特点"></a>ActiveMQ特点</h2><p>  完全支持JMS1.1和J2EE1.4规范（持久化，XA消息，事务）<br>  完全多种传送协议：in-VM，TCP，SSL，NIO，UDP，JGroups，JXTA<br>  可插拔的体系结构，可以灵活定制，如：消息存储方式、安全管理等<br>  很容易和Application Server集成使用<br>  多种语言和协议编写客户端。语言：Java，C，C++，C#，Ruby，Perl，Python，PHP<br>  从设计上保证了高性能的集群，客户端-服务器，点对点<br>  可以很容易和spring结合使用<br>  支持通过JDBC和journal提供高速的消息持久化<br>  支持与Axis的整合</p>
<h2 id="消息中间件"><a href="#消息中间件" class="headerlink" title="消息中间件"></a>消息中间件</h2><p>  MOM基本功能：将消息以消息的形式，从一个应用程序传送到另一个或多个应用程序。<br>  MOM主要特点：</p>
<ol>
<li>消息一部接收，类似手机短信的行为，消息发送者不需要等待消息接受者的响应，减少软件多系统集成的耦合度；</li>
<li><p>消息可靠接收，确保消息在中间件可靠保存，只有接收方收到后才会删除消息，多个消息也可以组成原子事务</p>
<p>消息中间件的主要应用场景：<br>在多个系统间进行整合和通讯的时候，通常会要求：</p>
<ol>
<li>可靠传输，数据不能丢失，有的时候，也会要求不能重复传输；</li>
<li>异步传输，否则各个系统同步发送接收数据，互相等待，造成系统瓶颈</li>
</ol>
</li>
</ol>
<p>目前比较知名的消息中间件：<br>IBM MQSeries<br>BEA WebLogic JMS Server<br>Oracle AQ<br>Tibco<br>SwiftMQ<br>ActiveMQ：是免费的Java实现的消息中间件</p>
<h1 id="ActiveMq的安装和基本使用"><a href="#ActiveMq的安装和基本使用" class="headerlink" title="ActiveMq的安装和基本使用"></a>ActiveMq的安装和基本使用</h1><h2 id="下载并安装ActiveMQ服务器端"><a href="#下载并安装ActiveMQ服务器端" class="headerlink" title="下载并安装ActiveMQ服务器端"></a>下载并安装ActiveMQ服务器端</h2><ol>
<li><p>下载ActiveMQ<br> 在Linux系统中输入一下下载命令：<br> <code>wget http://mirrors.hust.edu.cn/apache//activemq/5.15.3/apache-activemq-5.15.3-bin.tar.gz</code></p>
</li>
<li><p>直接解压，然后拷贝到你要安装的位置就好了<br> <code>tar -zxvf apache-activemq-5.15.3-bin.tar.gz</code></p>
</li>
<li><p>启动运行</p>
<ol>
<li>普通启动：到ActiveMQ/bin下面，<code>./activemq start</code></li>
<li>启动并指定日志文件 <code>./activemq start &gt; /tmp/activemqlog</code></li>
</ol>
</li>
<li><p>检查是否已经启动<br>ActiveMQ默认采用61616端口提供JMS服务，使用8161端口提供管理控制台服务，执行以下命令便以检验是否已成功启动ActiveMQ服务：</p>
<ol>
<li>比如查看61616端口是否打开：<code>netstat -an | grep 61616</code></li>
<li>也可以直接查看控制台输出或者日志文件</li>
<li>还可以直接访问ActiveMQ的管理控制台页面： <a href="http://192.168.159.170:8161/admin/" target="_blank" rel="noopener">http://192.168.159.170:8161/admin/</a> 默认的用户名和密码都是admin/admin</li>
</ol>
<p>关闭ActiveMQ，可以用 ./activemq stop<br>  暴力点可以直接用<code>ps -ef | grep activemq</code> 来得到进程号，然后kill掉</p>
<p>不要忘记开放linux端口号<br>  <code>firewall-cmd --zone=public --add-port=8161/tcp --permanent</code><br>  <code>firewall-cmd --zone=public --add-port=61616/tcp --permanent</code><br>  重启防火墙：<code>firewall-cmd --reload</code><br>  查看开放的端口号：<code>firewall-cmd --list-ports</code></p>
</li>
</ol>
<p>ActiveMQ 后台管理页面：<br>       <img src="./images/1526984596857.jpg" alt="enter description here" title="1526984596857.jpg"></p>
<h1 id="基本的Queue消息发送"><a href="#基本的Queue消息发送" class="headerlink" title="基本的Queue消息发送"></a>基本的Queue消息发送</h1><h2 id="配置Maven所需的依赖，示例如下："><a href="#配置Maven所需的依赖，示例如下：" class="headerlink" title="配置Maven所需的依赖，示例如下："></a>配置Maven所需的依赖，示例如下：</h2><p>1.创建maven项目：<br>2.引入项目activemq依赖<br><img src="./images/1526991821022.jpg" alt="enter description here" title="1526991821022.jpg"><br>依赖代码如下：</p>
<pre class="line-numbers language-xml"><code class="language-xml">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.apache.activemq<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>activemq-all<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>5.9.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.apache.xbean<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>xbean-spring<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>3.16<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="基本的生产者和消费者代码示例"><a href="#基本的生产者和消费者代码示例" class="headerlink" title="基本的生产者和消费者代码示例"></a>基本的生产者和消费者代码示例</h2><p>生产者 QueueSender代码</p>
<pre class="line-numbers language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">QueueSender</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> Exception<span class="token punctuation">{</span>
        <span class="token comment" spellcheck="true">//创建连接工厂</span>
        ConnectionFactory connectionFactory <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ActiveMQConnectionFactory</span><span class="token punctuation">(</span><span class="token string">"tcp://192.168.159.170:61616"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment" spellcheck="true">//从连接工厂获取连接</span>
        Connection connection <span class="token operator">=</span> connectionFactory<span class="token punctuation">.</span><span class="token function">createConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//启动连接</span>
        connection<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment" spellcheck="true">//从连接中获取该次session会话，并设置事务</span>
        Session session <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">createSession</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">,</span> Session<span class="token punctuation">.</span>AUTO_ACKNOWLEDGE<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment" spellcheck="true">//创建会话队列</span>
        Destination destination <span class="token operator">=</span> session<span class="token punctuation">.</span><span class="token function">createQueue</span><span class="token punctuation">(</span><span class="token string">"my-queue"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment" spellcheck="true">//创建生产者</span>
        MessageProducer producer <span class="token operator">=</span> session<span class="token punctuation">.</span><span class="token function">createProducer</span><span class="token punctuation">(</span>destination<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">3</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment" spellcheck="true">//创建消息对象</span>
            TextMessage message <span class="token operator">=</span> session<span class="token punctuation">.</span><span class="token function">createTextMessage</span><span class="token punctuation">(</span><span class="token string">"message---"</span> <span class="token operator">+</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment" spellcheck="true">//生产者发送消息</span>
            producer<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token comment" spellcheck="true">//提交事务</span>
        session<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//关闭session会话</span>
        session<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//关闭连接</span>
        connection<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>运行生产者之后，后台会出现生产者的信息，如下图：<br><img src="./images/1526994502944.jpg" alt="enter description here" title="1526994502944.jpg"></p>
<p>消费者代码</p>
<pre class="line-numbers language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">QueueReceiver</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> Exception<span class="token punctuation">{</span>
        <span class="token comment" spellcheck="true">//创建连接工厂</span>
        ConnectionFactory connectionFactory <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ActiveMQConnectionFactory</span><span class="token punctuation">(</span><span class="token string">"tcp://192.168.159.170:61616"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment" spellcheck="true">// 从连接工厂获取连接</span>
        Connection connection <span class="token operator">=</span> connectionFactory<span class="token punctuation">.</span><span class="token function">createConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">// 启动连接</span>
        connection<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment" spellcheck="true">// 从连接中获取该次session会话，并设置事务</span>
        Session session <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">createSession</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">,</span> Session<span class="token punctuation">.</span>AUTO_ACKNOWLEDGE<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment" spellcheck="true">// 创建会话队列</span>
        Destination destination <span class="token operator">=</span> session<span class="token punctuation">.</span><span class="token function">createQueue</span><span class="token punctuation">(</span><span class="token string">"my-queue"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment" spellcheck="true">// 创建消费者</span>
        MessageConsumer consumer <span class="token operator">=</span> session<span class="token punctuation">.</span><span class="token function">createConsumer</span><span class="token punctuation">(</span>destination<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token keyword">while</span><span class="token punctuation">(</span>i <span class="token operator">&lt;</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            i<span class="token operator">++</span><span class="token punctuation">;</span>
            <span class="token comment" spellcheck="true">//取出消息</span>
            TextMessage message <span class="token operator">=</span> <span class="token punctuation">(</span>TextMessage<span class="token punctuation">)</span> consumer<span class="token punctuation">.</span><span class="token function">receive</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            session<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"收到消息："</span> <span class="token operator">+</span> message<span class="token punctuation">.</span><span class="token function">getText</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token comment" spellcheck="true">// 关闭session会话</span>
        session<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">// 关闭连接</span>
        connection<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>控制台结果如下<br><img src="./images/1526994968264.jpg" alt="enter description here" title="1526994968264.jpg"><br><img src="./images/1526995010835.jpg" alt="enter description here" title="1526995010835.jpg"></p>
<h1 id="JMS基本概念和模型"><a href="#JMS基本概念和模型" class="headerlink" title="JMS基本概念和模型"></a>JMS基本概念和模型</h1><h2 id="JMS基本概念"><a href="#JMS基本概念" class="headerlink" title="JMS基本概念"></a>JMS基本概念</h2><p><strong>JSM是什么</strong><br>JMS Java Message Service，Java消息服务，是Java EE中的一个技术</p>
<p><strong>JMS规范</strong><br>  JMS定义了Java中访问消息中间件的接口，并没有给予实现，实现JMS接口的消息中间件称为JSM Provider，例如ActiveMQ</p>
<p><strong>JMS Provider</strong><br>  实现了JMS接口和规范的消息中间件<br><strong>JMS Message</strong><br> JMS的消息，JMS消息由以下三部分组成：</p>
<ol>
<li>消息头：每个消息头字段都有相应的getter和setter方法</li>
<li>消息属性：如果需要除消息头字段以为的值，那么可以使用消息属性</li>
<li>消息体：封装具体的消息数据</li>
</ol>
<p><strong>JMS Producer</strong><br>消息消费者，创建和发送JMS消息的客户端应用<br><strong>JMS Consumer</strong><br>消息消费者，接收和处理JMS消息的客户端应用</p>
<p>消息的消费可以采用以下两种方法之一：</p>
<ol>
<li>同步消费：通过调用消费者的receive方法从目的地中显示提取消息，receive方法可以一直阻塞到消息到达。</li>
<li>异步消费：客户可以为消费者注册一个消息监听器，以定义在消息到达时所采取的动作。</li>
</ol>
<p><strong>JMS Domains</strong><br>消息传递域，JMS规范中定义了两种欧冠呢消息传递域：点对点（point-to-point，简写成PTP）消息传递域和发布/订阅消息传递域（publish/subscribe，简写成pub/sub）</p>
<ol>
<li><p>点对点消息传递域的特点如下：<br> （1） 每个消息只能有一个消费者<br> （2）消息的生产者和消费者之间没有时间上的关联性。无论消费者在生产者发送消息的时候是否处于运行状态，他都可以提取消息。<br> <img src="./images/1526996128681.jpg" alt="enter description here" title="1526996128681.jpg"></p>
<ol start="2">
<li>发布/订阅消息传递域的特点如下：<br>（1）每个消息可以有多个消费者<br>（2）生产者和消费者之间有时间上的相关性。订阅一个主题的消费者只能消费自它订阅之后发布的消息。JMS规范允许客户创建持久订阅，这在一定程度上放松了时间上的相关性要求。持久订阅允许消费者消费它在未处于激活状态时发送的消息。</li>
</ol>
</li>
<li>在点对点消息传递域中，目的地被称为队列（queue）；在发布/订阅消息传递域中，目的地被称为主题（topic）<br><img src="./images/1526996412125.jpg" alt="enter description here" title="1526996412125.jpg"></li>
</ol>
<p><strong>Connection factory</strong><br>链接工厂，用来创建连接对象，以连接到JSM的provider<br><strong>JMS Connection</strong><br>封装了客户与JMS 提供者之间的一个虚拟的连接<br><strong>JMS Session</strong><br>是生产者和消费者的一个单线程上下文<br>  会话用于创建消息生产者（producer）、消息消费者（consumer）和消息（message）等。会话提供了一个事务性的上下文，在这个上下文中，一组发送和接收被组合到了一个原子操作中。<br><strong>Destination</strong><br>消息发送到的目的地<br><strong>Acknowledge</strong><br>签收<br><strong>Transaction</strong><br>事务<br><strong>JMS client</strong><br>用来收发消息的Java应用<br><strong>Non-JMS client</strong><br>使用JMS Provider本地API写的应用，用来替换JMS API实现收发消息的功能，通常会提供其他的一些特性，比如：CORBA、RMI等。<br><strong>Administered objects</strong><br>预定义的JMS对象，通常在provider规范中有定义，提供给JMS客户端来访问，比如：ConnectionFactory和Destination</p>
<h2 id="JMS的消息结构"><a href="#JMS的消息结构" class="headerlink" title="JMS的消息结构"></a>JMS的消息结构</h2><p><strong>JMS 消息由以下几个部分组成</strong><br>消息头、属性和消息体<br><strong>消息头包含消息的识别信息和路由信息，消息头包含一些标准的属性如下：</strong></p>
<ol>
<li>JMSDestination：由send方法设置</li>
<li>JMSDeliveryMode：由send方法设置</li>
<li>JMSExpiration：由send方法设置</li>
<li>JMSPriority：由send方法设置</li>
<li>JMSMessageID：由send方法设置</li>
<li>JMSTimestamp：由客户端设置</li>
<li>JMSCorrelationID：由客户端设置</li>
<li>JMSReplyTo：由客户端设置</li>
<li>JMSType：由客户端设置</li>
<li>JMSRedelivered：由JMS Provider设置</li>
</ol>
<p><strong>标准的JMS消息头包含以下属性：</strong></p>
<ol>
<li>JMSDestination：消息发送的目的地：主要是指Queue和Topic，自动分配</li>
<li>JMSDeliveryMode：传送模式。有两种：持久模式和非持久模式。一条持久性的消息应该被传送“一次仅仅一次”，这就意味着如果JMS提供者出现故障，该消息并不会丢失，它会在服务器回复之后再次传递。一条非持久的消息最多会传递一次，这意味着服务器出现故障，该消息将永远丢失。自动分配</li>
<li>JMSExpiration：消息过期时间，等于Destination的send方法中的timeToLive值加上发送时刻的GMT时间值。如果timeToLive值等于零，则JMSExpiration被设为零，表示该消息永不过期。如果发送后，在消息过期时间之后消息还没有被发送到目的地，则该消息被清除。自动分配</li>
<li>JMSPriority：消息优先级，从0-9十个级别，0-4是普通消息级别，5-9是加急消息。JMS不要求JMS Provider严格按照这十个优先级发送消息，但必须保证加急消息要优先于普通消息到达。默认是4级。自动分配</li>
<li>JMSMessageID：唯一识别每个消息的表示，由JMS Provider产生。自动分配</li>
<li>JMSTimestamp：一个JMS Provider在调用send（）方法时自动设置的。它是消息被发送和消费者实际接收的时间差。自动分配</li>
<li>JMSCorrelationID：用来连接到另一个消息，典型的应用是在回复消息中连接到原消息。在大多数情况下，JMSCorrelationID用于将一条消息标记为对JMSMessageID标示的上一条消息的应答，不过，JMSCorrelationID可以是任何值，不仅仅是JMSMessageID。由开发者设置</li>
<li>JMSReplyTo：提供本消息回复消息的目的地地址。由开发者设置</li>
<li>JMSType：消息类型的标识符。由开发者设置</li>
<li>JMSRedelivered：如果一个客户端收到一个设置了JMSRedelivered属性的消息，则表示可能客户端曾经在早些的时候接收到过该消息，但并没有签收（acknowledged）。如果该消息被重新传送，JMSRedelivered=true反之，JMSRedelivered=false。自动设置</li>
</ol>
<p><strong>消息体</strong><br>JMS API定义了5种消息体格式，也叫消息类型，可以使用不同形式发送接收数据，并可以兼容现有的消息格式。包括：TextMessage、MapMessage、ByteMessage、StreamMessage和ObjectMessage<br><strong>消息属性，包含以下三种类型的属性</strong></p>
<ol>
<li>应用程序设置和添加的属性，比如：<br>Message.setStringProperty(“username”,username);</li>
<li>JMS定义的属性<br>使用“JMSX”作为属性名的前缀，connection.getMetaData().getJMSXPropertyNames()，方法返回所有连接支持的JMSX属性的名字。</li>
<li>JMS供应商特定的属性<br><strong>JMS定义的属性如下：</strong></li>
<li>JMSXUserID：发送消息的用户标识，发送时提供商设置</li>
<li>JMSXAppID：发送消息的应用标识，发送时提供商设置</li>
<li>JMSXDeliveryCount：转发消息重试次数，第一次是1，第二次是2，…，发送时提供商设置</li>
<li>JMSXGroupID：消息所在消息组的标识，由客户端设置</li>
<li>JMSXGroupSeq：组成消息的序列号第一个消息是1，第二个是2，…，有客户端设置</li>
<li>JMSXProducerTXID：产生消息的事务的事务标识，发送时提供商设置</li>
<li>JMSXConsumerTXID：消费消息的事务的事务标识，接收时提供商设置</li>
<li>JMSXRcvTimestamp：JMS转发消息到消费者的时间，接收时提供商设置</li>
<li>JMSXState：假定存在一个消息库，它存储了每个消息的单独拷贝，且这些消息从原始消息被发送时开始。每个拷贝的状态有：1（等待），2（准备），3（到期）或4（保留）。由于状态与生产者和消费者无关，所以它不是由我们来提供，它是和在仓库中查找消息相关，因此JMS没有提供这种API。由供应商设置</li>
</ol>
<h1 id="JMS的可靠性机制"><a href="#JMS的可靠性机制" class="headerlink" title="JMS的可靠性机制"></a>JMS的可靠性机制</h1><h2 id="消息接收确认"><a href="#消息接收确认" class="headerlink" title="消息接收确认"></a>消息接收确认</h2><p>  JMS消息只有在被确认之后，才认为已经被成功消费了。消息的成功消费通常包含三个阶段：客户接收消息、客户处理消息和消息被确认。<br>  在事务性会话中，当一个事务被提交的时候，确认自动发生。在非事务性会话中，消息何时被确认取决于创建会话时的应答模式（acknowledgement mode）。该参数有一下三个可选值：</p>
<ol>
<li>Session.AUTO_ACKNOWLEDGE：当客户成功的从receive方法返回的时候，或者从MessageListener.onMessage方法成功返回的时候，会话自动确认客户收到的消息。</li>
<li>Session.CLIENT_ACKNOWLEDGE：客户通过调用消息的acknowledge方法确认消息。需要注意的是，在这种模式中，确认是在会话层上进行，确认一个被消费的消息将自动确认所有已被会话消费的消息。例如：如果一个消息消费者消费了10个消息，然后确认第5个消息，那么所有10个消息都被确认。</li>
<li>Session.DUPS_ACKNOWLEDGE：该选择只是会话迟钝的确认消息的提交。如果JMS provider失败，那么可能会导致一些重复的消息。如果是重复的消息，那么JMS provider必须把消息头的JMSRedelivered字段设置为true</li>
</ol>
<h2 id="消息持久性"><a href="#消息持久性" class="headerlink" title="消息持久性"></a>消息持久性</h2><p>PERSISTENT：指示JMS provider持久保存消息，以保证消息不会因为JMS provider的失败而丢失<br>NON_PERSISTENT：不要求JMS provider持久保存消息</p>
<h2 id="消息优先级"><a href="#消息优先级" class="headerlink" title="消息优先级"></a>消息优先级</h2><p>可以使用消息优先级来指示JMS provider首先提交紧急的消息。优先级分10个级别，从0（最低）到9（最高）。如果不指定优先级，默认级别是4.需要注意的是，JMS provider并不一定保证安好优先级的顺序提交消息</p>
<h2 id="消息过期"><a href="#消息过期" class="headerlink" title="消息过期"></a>消息过期</h2><p>可以设置消息在一定时间后过期，默认是永不过期</p>
<h2 id="消息的临时目的地"><a href="#消息的临时目的地" class="headerlink" title="消息的临时目的地"></a>消息的临时目的地</h2><p>可以通过会话上的createTemporaryQueue方法和createTemporaryTopic方法来创建临时目的地。它们的存在时间只限于创建它们的连接所保持的时间。只有创建该临时目的地的连接上的消息消费者才能够从临时目的地中提取消息</p>
<h2 id="持久订阅"><a href="#持久订阅" class="headerlink" title="持久订阅"></a>持久订阅</h2><p>首先消息生产者必须使用PERSISTENT提交消息。客户可以通过会话上的createDurableSubscriber方法来创建一个持久订阅，该方法的第一个参数必须是topic。第二个参数是订阅的名称。<br>  JMS provider会存储发布到持久订阅对应的topic上的消息。如果最初创建持久订阅的客户或者任何其它客户，使用相同的连接工厂和连接的客户ID，相同的主题和相同的订阅名，再次调用会话上的createDurableSubscriber方法，那么该持久订阅就会被激活。JMS provider会向客户发送客户处于非激活状态时所发布的消息。<br>  持久订阅在某个时刻只能有一个激活的订阅者。持久订阅在创建之后会一直保留，直到应用程序调用会话上的unsubscribe方法。</p>
<h2 id="本地事务"><a href="#本地事务" class="headerlink" title="本地事务"></a>本地事务</h2><p>  在一个JMS客户端，可以使用本地事务来组合消息的发送射接收。JMS Session接口提供了commit和rollback方法。事务提交意味着生产的所有消息被发送，消费的需所有消息被确认；事务回滚意味着生产的所有消息被销毁，消费的所有消息被回复并重新提交，除非它们已经过期。<br>  事务性的会话总是牵涉到事务处理中，commit或rollback方法一旦被调用，一个事物就结束了，而另一个事务被开始。关闭事务性会话将回滚其中的事务。<br>  需要注意的是，如果使用请求/回复机制，即发送一个消息，同时希望在同一个事物中等待接收该消息的回复，那么程序将被挂起，因为直到事务提交，发送操作才会真正执行。<br>  需要注意的还有一个，消息的生产和消费不能包含在同一个事务中。</p>
<h2 id="JMS的PTP模型"><a href="#JMS的PTP模型" class="headerlink" title="JMS的PTP模型"></a>JMS的PTP模型</h2><p><strong>JMS PTP</strong>模型定义了客户端如何向队列发送消息，从队列接收消息，以及浏览队列中的消息。<br>  PTP模型是基于队列的，生产者发消息到队列，消费者从队列接收消息，队列的存在使得消息的异步传输成为可能。和右键系统中的邮箱一样，队列可以包含各种消息，JMS Provider提供工具管理队列的创建、删除。<br><strong>PTP的一些特点</strong></p>
<ol>
<li>如果在session关闭时，有一些消息已经被接收到，但还没有被签收（acknowledged），那么，当消费者下次连接到相同的队列时，这些消息还会被再次接收</li>
<li>如果用户在receive方法 中设定了消息选择条件，那么不符合条件的消息会留在队列中，不会被接收到</li>
<li>队列可以长久地保存消息直到消费者接收消息。消费者不需要因为担心消息会丢失而时刻和队列保持激活的连接状态，充分体现了异步传输模式的优势</li>
</ol>
<h2 id="JMS的Pub-Sub模型"><a href="#JMS的Pub-Sub模型" class="headerlink" title="JMS的Pub/Sub模型"></a>JMS的Pub/Sub模型</h2><p><strong>JMS Pub/Sub</strong>模型定义了如何向一内容节点发布和订阅消息，这些节点被称作topic<br>主题可以被认为是消息的传输中介，发布者（publisher）发布消息到主题，订阅者（subscribe）从主题订阅消息。主题使得消息订阅者和消息发布者保持相互的独立，不需要接触即可保持消息的传递。<br><strong>Pub/Sub的一些特点</strong></p>
<ol>
<li>消息订阅分为非持久订阅和持久订阅<br> 非持久订阅只有当客户端处于激活状态，也就是JMS provider保持连接状态才能收到发送到某个主题的消息，而当客户端处于离线的状态，这个时间段发到主题的消息将会丢失，永远不会收到。<br> 持久订阅时，客户端向JMS注册一个识别自己身份的ID，当这个客户端处于离线时，JMS provider会为这个ID保存所有发送到主题的消息，当客户端处于离线时，JMS Provider会为这个ID保持所有发送到主题的消息，当客户再次连接到JMS Provider时，会根据自己的ID得到所有当自己处于离线时发送到主题的消息。</li>
<li>如果用户在receive方法中设定了消息选择条件，那么不符合条件的消息不会被接收</li>
<li>非持久订阅状态下，不能恢复或重新派送一个未签收的消息。只有持久订阅才能恢复或重新派送一个未签收的消息。</li>
<li>当所有的消息必须被接收，则用持久订阅。当丢失消息能够被容忍，则用非持久订阅</li>
</ol>

        
    

    
</div>


                

                <!-- Post Comments -->
                
                    
    <!-- 使用 DISQUS -->
<div id="disqus-comment">
    <div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_config = function () {
        this.page.url = 'https://hlmk.github.com/2018/05/22/activeMq的安装和基础/';  // Replace PAGE_URL with your page's canonical URL variable
        this.page.identifier = 'https://hlmk.github.com/2018/05/22/activeMq的安装和基础/'; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
    };
</script>
<script type="text/ls-javascript" id="disqus-thread-script">
    queue.offer(function() {
            (function() { // DON'T EDIT BELOW THIS LINE
                var d = document;
                var s = d.createElement('script');
                s.src = '//https-hlmk-github-io.disqus.com/embed.js';
                s.setAttribute('data-timestamp', + new Date());
                (d.head || d.body).appendChild(s);
            })();
        });
</script>

</div>
<style>
    #disqus-comment{
        background-color: #eee;
        padding: 2pc;
    }
</style>

                
            </div>

            <!-- Post Prev & Next Nav -->
            <nav class="material-nav mdl-color-text--grey-50 mdl-cell mdl-cell--12-col">
    <!-- Prev Nav -->
    
        <a href="/2018/05/23/springBoot2 精髓 从构建小系统到架构分布式大系统学习笔记/" id="post_nav-newer" class="prev-content">
            <button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon mdl-color--white mdl-color-text--grey-900" role="presentation">
                <i class="material-icons">arrow_back</i>
            </button>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            新篇
        </a>
    

    <!-- Section Spacer -->
    <div class="section-spacer"></div>

    <!-- Next Nav -->
    
        <a href="/2018/05/21/搭建github个人博客/" id="post_nav-older" class="next-content">
            旧篇
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            <button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon mdl-color--white mdl-color-text--grey-900" role="presentation">
                <i class="material-icons">arrow_forward</i>
            </button>
        </a>
    
</nav>

        </div>
    </div>



                    
                        <!-- Overlay For Active Sidebar -->
<div class="sidebar-overlay"></div>

<!-- Material sidebar -->
<aside id="sidebar" class="sidebar sidebar-colored sidebar-fixed-left" role="navigation">
    <div id="sidebar-main">
        <!-- Sidebar Header -->
        <div class="sidebar-header header-cover" style="background-image: url(/img/sidebar_header.png);">
    <!-- Top bar -->
    <div class="top-bar"></div>

    <!-- Sidebar toggle button -->
    <button type="button" class="sidebar-toggle mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon" style="display: initial;" data-upgraded=",MaterialButton,MaterialRipple">
        <i class="material-icons">clear_all</i>
        <span class="mdl-button__ripple-container">
            <span class="mdl-ripple">
            </span>
        </span>
    </button>

    <!-- Sidebar Avatar -->
    <div class="sidebar-image">
        <img src="/img/avatar.gif" alt="hlmk's avatar">
    </div>

    <!-- Sidebar Email -->
    <a data-toggle="dropdown" class="sidebar-brand" href="#settings-dropdown">
        link.cht@email.com
        <b class="caret"></b>
    </a>
</div>


        <!-- Sidebar Navigation  -->
        <ul class="nav sidebar-nav">
    <!-- User dropdown  -->
    <li class="dropdown">
        <ul id="settings-dropdown" class="dropdown-menu">
            
                <li>
                    <a href="mailto: link.cht@qq.com" target="_blank" title="Email Me">
                        
                            <i class="material-icons sidebar-material-icons sidebar-indent-left1pc-element">email</i>
                        
                        Email Me
                    </a>
                </li>
            
        </ul>
    </li>

    <!-- Homepage -->
    
        <li id="sidebar-first-li">
            <a href="/">
                
                    <i class="material-icons sidebar-material-icons">home</i>
                
                主页
            </a>
        </li>
        
    

    <!-- Archives  -->
    
        <li class="dropdown">
            <a href="#" class="ripple-effect dropdown-toggle" data-toggle="dropdown">
                
                    <i class="material-icons sidebar-material-icons">inbox</i>
                
                    归档
                <b class="caret"></b>
            </a>
            <ul class="dropdown-menu">
            <li>
                <a class="sidebar_archives-link" href="/archives/2018/05/">五月 2018<span class="sidebar_archives-count">7</span></a>
            </ul>
        </li>
        
    

    <!-- Categories  -->
    

    <!-- Pages  -->
    
        <li>
            <a href="/about" title="Java">
                
                    <i class="material-icons sidebar-material-icons">person</i>
                
                Java
            </a>
        </li>
        
    

    <!-- Article Number  -->
    
        <li>
            <a href="/archives">
                文章总数
                <span class="sidebar-badge">7</span>
            </a>
        </li>
        
    
</ul>


        <!-- Sidebar Footer -->
        <!--
I'm glad you use this theme, the development is no so easy, I hope you can keep the copyright, I will thank you so much.
If you still want to delete the copyrights, could you still retain the first one? Which namely "Theme Material"
It will not impact the appearance and can give developers a lot of support :)

很高兴您使用并喜欢该主题，开发不易 十分谢谢与希望您可以保留一下版权声明。
如果您仍然想删除的话 能否只保留第一项呢？即 "Theme Material"
它不会影响美观并可以给开发者很大的支持和动力。 :)
-->

<!-- Sidebar Divider -->

    <div class="sidebar-divider"></div>


<!-- Theme Material -->

    <a href="https://github.com/viosey/hexo-theme-material"  class="sidebar-footer-text-a" target="_blank">
        <div class="sidebar-text mdl-button mdl-js-button mdl-js-ripple-effect sidebar-footer-text-div" data-upgraded=",MaterialButton,MaterialRipple">
            主题 - Material
            <span class="sidebar-badge badge-circle">i</span>
        </div>
    </a>


<!-- Help & Support -->
<!--

-->

<!-- Feedback -->
<!--

-->

<!-- About Theme -->
<!--

-->

    </div>

    <!-- Sidebar Image -->
    

</aside>

                    

                    
                        <!-- Footer Top Button -->
                        <div id="back-to-top" class="toTop-wrap">
    <a href="#top" class="toTop">
        <i class="material-icons footer_top-i">expand_less</i>
    </a>
</div>

                    

                    <!--Footer-->
<footer class="mdl-mini-footer" id="bottom">
    
        <!-- Paradox Footer Left Section -->
        <div class="mdl-mini-footer--left-section sns-list">
    <!-- Twitter -->
    
        <a href="https://twitter.com/twitter" target="_blank">
            <button class="mdl-mini-footer--social-btn social-btn footer-sns-twitter">
                <span class="visuallyhidden">Twitter</span>
            </button><!--
     --></a>
    

    <!-- Facebook -->
    
        <a href="https://www.facebook.com/facebook" target="_blank">
            <button class="mdl-mini-footer--social-btn social-btn footer-sns-facebook">
                <span class="visuallyhidden">Facebook</span>
            </button><!--
     --></a>
    

    <!-- Google + -->
    
        <a href="https://www.google.com/" target="_blank">
            <button class="mdl-mini-footer--social-btn social-btn footer-sns-gplus">
                <span class="visuallyhidden">Google Plus</span>
            </button><!--
     --></a>
    

    <!-- Weibo -->
    

    <!-- Instagram -->
    

    <!-- Tumblr -->
    

    <!-- Github -->
    
        <a href="https://github.com/hlmk" target="_blank">
            <button class="mdl-mini-footer--social-btn social-btn footer-sns-github">
                <span class="visuallyhidden">Github</span>
            </button><!--
     --></a>
    

    <!-- LinkedIn -->
    

    <!-- Zhihu -->
    

    <!-- Bilibili -->
    

    <!-- Telegram -->
    
    
    <!-- V2EX -->
    
</div>


        <!--Copyright-->
        <div id="copyright">
            Copyright&nbsp;©<script type="text/javascript">var fd = new Date();document.write("&nbsp;" + fd.getFullYear() + "&nbsp;");</script>Hlmk's Blog
            
        </div>

        <!-- Paradox Footer Right Section -->

        <!--
        I am glad you use this theme, the development is no so easy, I hope you can keep the copyright.
        It will not impact the appearance and can give developers a lot of support :)

        很高兴您使用该主题，开发不易，希望您可以保留一下版权声明。
        它不会影响美观并可以给开发者很大的支持。 :)
        -->

        <div class="mdl-mini-footer--right-section">
            <div>
                <div class="footer-develop-div">Powered by <a href="https://hexo.io" target="_blank" class="footer-develop-a">Hexo</a></div>
                <div class="footer-develop-div">Theme - <a href="https://github.com/viosey/hexo-theme-material" target="_blank" class="footer-develop-a">Material</a></div>
            </div>
        </div>
    
</footer>


                    <!-- Import JS File -->

    <script>lsloader.load("lazyload_js","/js/lazyload.min.js?1BcfzuNXqV+ntF6gq+5X3Q==", true)</script>



    <script>lsloader.load("js_js","/js/js.min.js?V/53wGualMuiPM3xoetD5Q==", true)</script>



    <script>lsloader.load("np_js","/js/nprogress.js?pl3Qhb9lvqR1FlyLUna1Yw==", true)</script>


<script type="text/ls-javascript" id="NProgress-script">
    NProgress.configure({
        showSpinner: true
    });
    NProgress.start();
    $('#nprogress .bar').css({
        'background': '#29d'
    });
    $('#nprogress .peg').css({
        'box-shadow': '0 0 10px #29d, 0 0 15px #29d'
    });
    $('#nprogress .spinner-icon').css({
        'border-top-color': '#29d',
        'border-left-color': '#29d'
    });
    setTimeout(function() {
        NProgress.done();
        $('.fade').removeClass('out');
    }, 800);
</script>









   <!-- 使用 DISQUS js 代码 -->
<script id="dsq-count-scr" src="//https-hlmk-github-io.disqus.com/count.js" async></script>





<!-- UC Browser Compatible -->
<script>
	var agent = navigator.userAgent.toLowerCase();
	if(agent.indexOf('ucbrowser')>0) {
		document.write('<link rel="stylesheet" href="/css/uc.css">');
	   alert('由于 UC 浏览器使用极旧的内核，而本网站使用了一些新的特性。\n为了您能更好的浏览，推荐使用 Chrome 或 Firefox 浏览器。');
	}
</script>

<!-- Import prettify js  -->

    
        
            <script>lsloader.load("prettify_js","/js/prettify.min.js?WN07fivHQSMKWy7BmHBB6w==", true)</script>
        
    



<!-- Window Load -->
<!-- add class for prettify -->
<script type="text/ls-javascript" id="window-load">
    $(window).on('load', function() {
        // Post_Toc parent position fixed
        $('.post-toc-wrap').parent('.mdl-menu__container').css('position', 'fixed');
    });

    
        
            $(function() {
                $('pre').addClass('prettyprint linenums').attr('style', 'overflow:auto;');
                prettyPrint();
                })
        
    
    
</script>

<!-- MathJax Load-->


<!-- Bing Background -->


<script type="text/ls-javascript" id="lazy-load">
    // Offer LazyLoad
    queue.offer(function(){
        $('.lazy').lazyload({
            effect : 'show'
        });
    });

    // Start Queue
    $(document).ready(function(){
        setInterval(function(){
            queue.execNext();
        },200);
    });
</script>

<!-- Custom Footer -->



<script>
    (function(){
        var scriptList = document.querySelectorAll('script[type="text/ls-javascript"]')

        for (var i = 0; i < scriptList.length; ++i) {
            var item = scriptList[i];
            lsloader.runInlineScript(item.id,item.id);
        }
    })()
console.log('\n %c © Material Theme | Version: 1.5.2 | https://github.com/viosey/hexo-theme-material %c \n', 'color:#455a64;background:#e0e0e0;padding:5px 0;border-top-left-radius:5px;border-bottom-left-radius:5px;', 'color:#455a64;background:#e0e0e0;padding:5px 0;border-top-right-radius:5px;border-bottom-right-radius:5px;');
</script>

                </main>
            </div>
        </body>
    
</html>
